{% extends 'base.html' %}

{% block title %}Sortear Bilhete Vencedor{% endblock %}

{% block content %}
  {% if sorteio_escolhido %}
    {% if not validado %}
    <article>
        <div>
            <h2>O Bilhete Sorteado foi:</h2>
            <table>
                <tr>
                  <th>Codigo</th>
                  <th>Nome</th>
                  <th>Sobrenome</th>
                  <th>Celular</th>
                </tr>
                <tr>
                  <td>{{sorteado['codigo']}}</td>
                  <td>{{sorteado['nome']}}</td>
                  <td>{{sorteado['sobrenome']}}</td>
                  <td>{{sorteado['celular']}}</td>
                </tr>
        </div>
        <form method="post">
            <input type="hidden" name="id_bilhete" value="{{sorteado['id_bilhete']}}"></input>
            <input type="submit" value="Validar Sorteio"></input>
        </form>
        
    </article>
    {% else %}
      <article>
              <div>
                  <h2>Validado o vencedor:</h2>
                  <table>
                      <tr>
                      <th>Codigo</th>
                      <th>Nome</th>
                      <th>Sobrenome</th>
                      <th>Celular</th>
                      </tr>
                      <tr>
                      <td>{{sorteado['codigo']}}</td>
                      <td>{{sorteado['nome']}}</td>
                      <td>{{sorteado['sobrenome']}}</td>
                      <td>{{sorteado['celular']}}</td>
                      </tr>
              </div>
              <a href="{{ url_for('admin.index') }}">Voltar para a √Årea de Administrador</a>
          </article>        
    {% endif %}
  {% else %}
    <form method="post" style="display: flex; flex-direction: column; gap: 12px; max-width: 400px;">
      <label for="sorteio_id">Selecione o sorteio:</label>
      <select name="sorteio_id" id="sorteio_id" required style="padding: 10px; border-radius: 5px; border: 1px solid #ccc;">
        {% for sorteio in sorteios %}
          <option value="{{ sorteio.id_sorteio }}">{{ sorteio.nome }}</option>
        {% endfor %}
      </select>
      <button type="submit" style="padding: 10px; background-color: #28a745; color: white; border: none; border-radius: 5px;">Sortear Vencedor</button>
    </form>
  {% endif %}
{% endblock %}
